---
import { Icon } from "astro-icon/components";
const { metadata, minutes } = Astro.props;

const formatDate = (date: Date) => {
    return date.toLocaleDateString("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric",
    });
};
---

<div class="banner">
    <button id="back-button" class="back-button exclude-from-panel">
        <Icon name="ph:arrow-left-bold" />
        <span class="back-text">Back</span>
    </button>
    <div class="header-row">
        <div class="pubDate" id="pubDate">
            <span>
                {formatDate(metadata.published)} ✴︎
            </span>
            <span>{minutes} ✴︎ </span>
            <span>{metadata.tags.join(", ")}</span>
        </div>
        <div>
            <h1 class="displayTitle exclude-from-panel">{metadata.title}</h1>
        </div>
    </div>
    <div><h3 class="exclude-from-panel">{metadata.excerpt}</h3></div>
</div>

<script>
    const backButton = document.getElementById("back-button");
    backButton?.addEventListener("click", () => {
        window.history.back();
    });
</script>

<style>
    div.banner {
        padding-bottom: calc(var(--q) * 24);
        border-bottom: 2px solid var(--main-border);
        margin-bottom: calc(var(--q) * 2);
    }

    .header-row {
        display: flex;
        flex-direction: column;
    }

    h1.displayTitle {
        font-size: 4rem;
        transition: margin-left 0.3s ease;
        text-wrap: balance;
    }

    div.title {
        font-size: 1.25rem;
        font-weight: 700;
        transition: margin-left 0.3s ease;
        flex: 1;
    }

    .back-button {
        display: flex;
        align-items: center;
        padding: 6px;
        background: none;
        border: none;
        border-radius: var(--border-s);
        color: var(--text);
        font-size: 12px;
        font-weight: bold;
        font-family: system-ui;
        cursor: pointer;
        transition: all 0.3s ease;
        overflow: hidden;
        white-space: nowrap;
    }

    .back-button :global(svg) {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
    }

    .back-text {
        display: inline-block;
        width: 0;
        overflow: hidden;
        transition: all 0.3s ease;
        margin-left: 0;
    }

    .back-button:hover .back-text {
        width: 32px;
        margin-left: 6px;
    }

    .back-button:hover {
        background: var(--rams-red);
        color: white;
        padding-right: 10px;
    }

    div.pubDate {
        opacity: 0.5;
        font-size: 15px;
        margin-top: 12px;
    }
</style>
