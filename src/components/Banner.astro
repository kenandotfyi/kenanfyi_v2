---
import { Icon } from "astro-icon/components";
const { metadata, minutes, collection } = Astro.props;

const formatDate = (date: Date) => {
    return date.toLocaleDateString("en-US", {
        year: "numeric",
        month: "short",
        day: "numeric",
    });
};
---

<div class="banner">
    <a href={`/${collection}/`} class="back-button exclude-from-panel">
        <Icon name="ph:arrow-left-bold" />
        <span class="back-text">Back</span>
    </a>
    <div class="header-row">
        <div class="pubDate" id="pubDate">
            <span>{formatDate(metadata.published)}</span>
            <span class="sep">/</span>
            <span>{minutes}</span>
            <span class="sep">/</span>
            <span>{metadata.tags.join(", ")}</span>
        </div>
        <div>
            <h1 class="displayTitle exclude-from-panel">{metadata.title}</h1>
        </div>
    </div>
    {
        metadata.excerpt && (
            <div>
                <h3 class="excerpt exclude-from-panel">{metadata.excerpt}</h3>
            </div>
        )
    }
</div>

<style>
    div.banner {
        padding-bottom: calc(var(--q) * 16);
        border-bottom: 1px solid var(--panel-border);
        margin-bottom: calc(var(--q) * 2);
    }

    .header-row {
        display: flex;
        flex-direction: column;
    }

    h1.displayTitle {
        font-size: 3rem;
        text-wrap: balance;
        line-height: 1.15;
    }

    .excerpt {
        color: var(--text-muted);
        font-weight: 400;
        font-size: 1.1rem;
    }

    .back-button {
        display: inline-flex;
        align-items: center;
        padding: 6px;
        background: none;
        border: none;
        border-radius: var(--border-s);
        color: var(--text-muted);
        font-size: 12px;
        font-weight: bold;
        text-decoration: none;
        transition: all 0.2s ease;
        overflow: hidden;
        white-space: nowrap;
    }

    .back-button :global(svg) {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
    }

    .back-text {
        display: inline-block;
        width: 0;
        overflow: hidden;
        transition: all 0.2s ease;
        margin-left: 0;
    }

    .back-button:hover .back-text {
        width: 32px;
        margin-left: 6px;
    }

    .back-button:hover {
        background: var(--accent);
        color: white;
        padding-right: 10px;
    }

    div.pubDate {
        color: var(--text-muted);
        font-size: 0.85rem;
        margin-top: 12px;
    }

    .sep {
        margin: 0 6px;
        opacity: 0.4;
    }
</style>
